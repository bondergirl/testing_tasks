1. Инициализация Celery для асинхронного выполнения задач и управления очередями.

2. Объявление класса TrafficLight, который представляет светофор на перекрестке. 
У каждого светофора есть уникальный идентификатор (id), направление (direction) и список возможных состояний светофора
(light_states). Каждый светофор имеет текущее состояние, которое определяется индексом в списке light_states. 
Класс также содержит методы для изменения состояния светофора и управления таймером, который переключает состояния.

3. Определение класса Timer, который представляет таймер, используемый для переключения состояний светофора. 
Таймер запускается в отдельном потоке и после заданного времени вызывает метод изменения состояния светофора.

4. Моделирование оценки текущей загруженности перекрестка при помощи функции evaluate_traffic.
Для автомобильных и пешеходных очередей их длина генерируется случайным образом.

5. Обработка событий между светофорами при помощи задачи handle_traffic_events.
Функция получает информацию о текущей загрузке и состоянии других светофоров и может использовать эту информацию 
для принятия решений, например, о переключении состояния светофора.

6. Оптимизация работы светофоров с помощью задачи Celery optimize_traffic, вызывающей функцию evaluate_traffic
для получения информации о текущей загрузке. Затем создаются светофоры (экземпляры класса TrafficLight) для 
автомобильного и пешеходного движения. Для каждого светофора определяется продолжительность зеленого сигнала 
в зависимости от текущей загрузки. Также для каждой пары светофоров генерируется событие, которое отправляется 
для обработки в задачу handle_traffic_events.

7. Запуск оптимизации трафика через Celery. Основной цикл программы запускает оптимизацию трафика 
через Celery каждые 30 секунд (для примера, время можно менять).